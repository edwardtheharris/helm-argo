###
# ```{rubric} HPA Test Suite
# ```
# ---
# Tests to validate the hpa configuration.
#
# ```{literalinclude} /tests/hpa_test.yaml
# :language: yaml
# :start-at: "suite: test for hpa\n"
# :end-before: "###\n"
# ```
suite: test for hpa
release:
  name: argo-cd
values:
- ../values.yaml

###
# ```{rubric} HPA Tests
# ```
# ---
# Tests for Deployment Template
#
# ```{literalinclude} /tests/hpa_test.yaml
# :language: yaml
# :start-at: "tests:\n"
# ```
tests:
- it: should be an hpa
  set:
    autoscaling.enabled: true
  asserts:
  - isKind:
      of: HorizontalPodAutoscaler
  - equal:
      path: apiVersion
      value: autoscaling/v2
  - matchSnapshot:
      path: metadata
